<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Smart Contract Example"><title>Smart Contract Example | Learn Rubix Blockchain Platform</title><link rel=icon href=/favicon/logo.png type=image/x-icon><link rel=stylesheet href=/main.min.css media=screen><link rel=stylesheet href=/feather-core.css media=screen><link rel=stylesheet href=/custom.css media=screen><link rel=stylesheet href=/syntax.css media=screen><script async src="https://www.googletagmanager.com/gtag/js?id=G-FJR6JCFM8Y"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag("js",new Date());gtag("config","G-FJR6JCFM8Y");</script></head><body><svg style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="0 0 24 24" id="arrow_back" xmlns="http://www.w3.org/2000/svg"><path fill="#04879d" d="M20.016 11.016v1.969H7.828l5.578 5.625L12 20.016 3.984 12 12 3.984l1.406 1.406-5.578 5.625h12.188z"/></symbol><symbol viewBox="0 0 24 24" id="arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M7.969 11.016v-3L3.985 12l3.984 3.984v-3h12.047v-1.969H7.969z"/></symbol><symbol viewBox="0 0 24 24" id="arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M16.031 11.016v-3L20.015 12l-3.984 3.984v-3H3.984v-1.969h12.047z"/></symbol><symbol viewBox="0 0 24 24" id="bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15 5.016q.797.0 1.406.586t.609 1.383v16.031l-7.031-3-6.984 3V6.985q0-.797.609-1.383t1.406-.586h9.984zM18.984 18V5.016q0-.797-.586-1.406t-1.383-.609H6.984q0-.797.609-1.406T8.999.986h9.984q.797.0 1.406.609t.609 1.406v15.984z"/></symbol><symbol viewBox="0 0 16 28" id="code" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 23a1.5 1.5.0 10-3.001.001A1.5 1.5.0 004.5 23zm0-18a1.5 1.5.0 10-3.001.001A1.5 1.5.0 004.5 5zm10 2a1.5 1.5.0 10-3.001.001A1.5 1.5.0 0014.5 7zM16 7a3.002 3.002.0 01-1.5 2.594c-.047 5.641-4.047 6.891-6.703 7.734C5.313 18.109 4.5 18.484 4.5 20v.406A3 3 0 016 23a3.001 3.001.0 01-6 0c0-1.109.609-2.078 1.5-2.594V7.594A3 3 0 010 5a3.001 3.001 0 016 0 3.002 3.002 0 01-1.5 2.594v7.766c.797-.391 1.641-.656 2.406-.891C5.312 10.953 6.968 10.266 7 7a3 3 0 013 0 3.001 3.001.0 016 0z"/></symbol><symbol viewBox="0 0 24 24" id="date" xmlns="http://www.w3.org/2000/svg"><path d="M18.984 20.016V9H5.015v11.016h13.969zm0-16.032q.797.0 1.406.609t.609 1.406v14.016q0 .797-.609 1.383t-1.406.586H5.015q-.844.0-1.43-.563t-.586-1.406V5.999q0-.797.586-1.406t1.43-.609h.984V2.015h2.016v1.969h7.969V2.015H18v1.969h.984zm-1.968 7.032v1.969H15v-1.969h2.016zm-4.032.0v1.969h-1.969v-1.969h1.969zm-3.984.0v1.969H6.984v-1.969H9z"/></symbol><symbol viewBox="0 0 24 24" id="download" xmlns="http://www.w3.org/2000/svg"><path d="M5.016 18h13.969v2.016H5.016V18zm13.968-9L12 15.984 5.016 9H9V3h6v6h3.984z"/></symbol><symbol viewBox="0 0 24 24" id="email" xmlns="http://www.w3.org/2000/svg"><path d="M20.016 8.016V6L12 11.016 3.984 6v2.016L12 12.985zm0-4.032q.797.0 1.383.609t.586 1.406v12q0 .797-.586 1.406t-1.383.609H3.985q-.797.0-1.383-.609t-.586-1.406v-12q0-.797.586-1.406t1.383-.609h16.031z"/></symbol><symbol viewBox="0 0 24 28" id="github" xmlns="http://www.w3.org/2000/svg"><path d="M12 2c6.625.0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-.609.109-.828-.266-.828-.578.0-.391.016-1.687.016-3.297.0-1.125-.375-1.844-.812-2.219 2.672-.297 5.484-1.313 5.484-5.922.0-1.313-.469-2.375-1.234-3.219.125-.313.531-1.531-.125-3.187-1-.313-3.297 1.234-3.297 1.234a11.28 11.28.0 00-6 0S6.704 6.656 5.704 6.969c-.656 1.656-.25 2.875-.125 3.187-.766.844-1.234 1.906-1.234 3.219.0 4.594 2.797 5.625 5.469 5.922-.344.313-.656.844-.766 1.609-.688.313-2.438.844-3.484-1-.656-1.141-1.844-1.234-1.844-1.234-1.172-.016-.078.734-.078.734.781.359 1.328 1.75 1.328 1.75.703 2.141 4.047 1.422 4.047 1.422.0 1 .016 1.937.016 2.234.0.313-.219.688-.828.578C3.439 23.796.002 19.296.002 13.999c0-6.625 5.375-12 12-12zM4.547 19.234c.031-.063-.016-.141-.109-.187-.094-.031-.172-.016-.203.031-.031.063.016.141.109.187.078.047.172.031.203-.031zm.484.532c.063-.047.047-.156-.031-.25-.078-.078-.187-.109-.25-.047-.063.047-.047.156.031.25.078.078.187.109.25.047zm.469.703c.078-.063.078-.187.0-.297-.063-.109-.187-.156-.266-.094-.078.047-.078.172.0.281s.203.156.266.109zm.656.656c.063-.063.031-.203-.063-.297-.109-.109-.25-.125-.313-.047-.078.063-.047.203.063.297.109.109.25.125.313.047zm.891.391c.031-.094-.063-.203-.203-.25-.125-.031-.266.016-.297.109s.063.203.203.234c.125.047.266.0.297-.094zm.984.078c0-.109-.125-.187-.266-.172-.141.0-.25.078-.25.172.0.109.109.187.266.172.141.0.25-.078.25-.172zm.906-.156c-.016-.094-.141-.156-.281-.141-.141.031-.234.125-.219.234.016.094.141.156.281.125s.234-.125.219-.219z"/></symbol><symbol viewBox="0 0 28 28" id="heart" xmlns="http://www.w3.org/2000/svg"><path d="M14 26c-.25.0-.5-.094-.688-.281l-9.75-9.406c-.125-.109-3.563-3.25-3.563-7C-.001 4.735 2.796 2 7.468 2c2.734.0 5.297 2.156 6.531 3.375C15.233 4.156 17.796 2 20.53 2c4.672.0 7.469 2.734 7.469 7.313.0 3.75-3.437 6.891-3.578 7.031l-9.734 9.375a.972.972.0 01-.688.281z"/></symbol><symbol viewBox="0 0 24 24" id="link" xmlns="http://www.w3.org/2000/svg"><path d="M17.016 6.984q2.063.0 3.516 1.477T21.985 12t-1.453 3.539-3.516 1.477h-4.031v-1.922h4.031q1.266.0 2.18-.914T20.11 12t-.914-2.18-2.18-.914h-4.031V6.984h4.031zm-9 6v-1.969h7.969v1.969H8.016zM3.891 12q0 1.266.914 2.18t2.18.914h4.031v1.922H6.985q-2.063.0-3.516-1.477T2.016 12t1.453-3.539 3.516-1.477h4.031v1.922H6.985q-1.266.0-2.18.914T3.891 12z"/></symbol><symbol viewBox="0 0 24 24" id="menu" xmlns="http://www.w3.org/2000/svg"><path fill="#04879d" d="M3 6h18v2.016H3V6zm0 6.984v-1.969h18v1.969H3zM3 18v-2.016h18V18H3z"/></symbol><symbol viewBox="0 0 24 24" id="notification" xmlns="http://www.w3.org/2000/svg"><path d="M18 15.984 20.016 18v.984H3.985V18l2.016-2.016v-4.969q0-2.344 1.195-4.078t3.305-2.25v-.703q0-.609.422-1.055t1.078-.445 1.078.445.422 1.055v.703q2.109.516 3.305 2.25t1.195 4.078v4.969zm-6 6q-.844.0-1.43-.563t-.586-1.406h4.031q0 .797-.609 1.383T12 21.984z"/></symbol><symbol viewBox="0 0 24 24" id="path" xmlns="http://www.w3.org/2000/svg"><path d="M21.984 11.016H15v-3h-2.016v7.969H15v-3h6.984v8.016H15v-3h-3.984V8.017H9v3H2.016V3.001H9v3h6v-3h6.984v8.016z"/></symbol><symbol viewBox="0 0 24 24" id="person" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.016q2.531.0 5.273 1.102t2.742 2.883v2.016H3.984v-2.016q0-1.781 2.742-2.883t5.273-1.102zM12 12q-1.641.0-2.813-1.172T8.015 8.015t1.172-2.836T12 3.984t2.813 1.195 1.172 2.836-1.172 2.813T12 12z"/></symbol><symbol viewBox="0 0 24 24" id="search" xmlns="http://www.w3.org/2000/svg"><path d="M9.516 14.016q1.875.0 3.188-1.313t1.313-3.188-1.313-3.188-3.188-1.313-3.188 1.313-1.313 3.188 1.313 3.188 3.188 1.313zm6 0 4.969 4.969-1.5 1.5-4.969-4.969v-.797l-.281-.281q-1.781 1.547-4.219 1.547-2.719.0-4.617-1.875T3.001 9.516t1.898-4.617 4.617-1.898 4.594 1.898 1.875 4.617q0 .984-.469 2.227t-1.078 1.992l.281.281h.797z"/></symbol><symbol viewBox="0 0 20 28" id="shield" xmlns="http://www.w3.org/2000/svg"><path d="M17 15V5h-7v17.766c.797-.422 2.078-1.156 3.328-2.141C15 19.312 17 17.266 17 15zm3-12v12c0 6.578-9.203 10.734-9.594 10.906-.125.063-.266.094-.406.094s-.281-.031-.406-.094C9.203 25.734.0 21.578.0 15V3c0-.547.453-1 1-1h18c.547.0 1 .453 1 1z"/></symbol><symbol viewBox="0 0 32 32" id="tags" xmlns="http://www.w3.org/2000/svg"><path d="M5 5c-1.104.0-2 .887-2 2v8l13.381 13.381c.716.716 1.838.78 2.62.191L5 14.5V5.007 5zm11-1 13.381 13.381c.783.783.787 2.051.008 2.831l-7.177 7.177a2.003 2.003.0 01-2.831-.008L6 14V6c0-1.112.895-2 2-2h8zm-4.5 7a1.5 1.5.0 10-.001-3.001A1.5 1.5.0 0011.5 11z"/></symbol><symbol viewBox="0 0 35 32" id="telescope" xmlns="http://www.w3.org/2000/svg"><path d="M27.464 2.314a.501.501.0 00-.698-.257L14.86 8.339a.499.499.0 00-.233.621l.245.641-6.873 3.769a.5.5.0 00-.222.63l.228.549-7.299 3.488a.5.5.0 00-.246.643l1.498 3.61a.5.5.0 00.629.28l7.625-2.701.228.549a.5.5.0 00.601.289l7.276-2.097.218.569a.497.497.0 00.612.299l13-4a.498.498.0 00.317-.663l-5-12.501zM2.7 21.469l-1.134-2.734 6.823-3.261 1.439 3.47L2.7 21.469zm8.491-1.846-.238-.574-1.843-4.445-.238-.573 6.336-3.475 2.374 6.134.375.981-6.766 1.952zm8.109-1.238-.203-.531c-.003-.011-.001-.024-.006-.035l-.618-1.597-2.754-7.206 11.023-5.815 4.592 11.48L19.3 18.385zM28.964.314a.5.5.0 00-.929.371l6 1515a.502.502 0 00.651.279.501.501 0 00.279-.65-6.001-15zM18 21h-3c-1.14.0-2 .86-2 2v1.315l-5.879 6.859a.5.5.0 10.758.651L13.73 25H16v6.5a.5.5.0 001 0V25h2.27l5.85 6.8255a.497.497 0 00.705.054.5.5 0 00.054-.705L20 24.315v-1.24C20 21.912 19.122 21 18 21zm1 3h-5v-1c0-.589.411-1 1-1h3c.57.0 1 .462 1 1.075V24z"/></symbol><symbol id="Rubix" width="22" height="22" viewBox="0 2 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.9979 5.13125C23.1522 5.49214 22.2437 5.73599 21.2885 5.84621 22.2629 5.28438 23.0104 4.39287 23.3629 3.33164 22.4513 3.8525 21.4415 4.23095 20.3668 4.43384 19.5059 3.55208 18.2804 3 16.9231 3 14.3181 3 12.2052 5.03468 12.2052 7.54536 12.2052 7.9004 12.2478 8.24569 12.3268 8.57928 8.40398 8.38908 4.92887 6.57971 2.60133 3.83104 2.19618 4.50406 1.96323 5.28438 1.96323 6.11542 1.96323 7.69167 2.79681 9.08356 4.06187 9.89802 3.28804 9.87363 2.56081 9.66977 1.92474 9.32936V9.38788C1.92474 11.5894 3.55037 13.426 5.70978 13.8435 5.31274 13.9469 4.89646 14.0015 4.46701 14.0015 4.16315 14.0015 3.86638 13.9742 3.57873 13.9215 4.17936 15.726 5.92147 17.0409 7.98669 17.076 6.37118 18.2952 4.33635 19.0219 2.1263 19.0219 1.74546 19.0219 1.36969 19.0004 1 18.9585 3.08851 20.2489 5.56798 21 8.2318 21 16.912 21 21.6572 14.0766 21.6572 8.07207 21.6572 7.87699 21.6522 7.67996 21.643 7.48488 22.5647 6.84307 23.3649 6.04422 23.9959 5.13417L23.9979 5.13125z" fill="#000"/></symbol></svg><div class=wrapper><input type=checkbox class=hidden id=menu-control><header class=gdoc-header><div class="container flex align-center justify-between"><a class=gdoc-header__link href=https://learn.rubix.net/><span class="gdoc-brand flex align-center"><img class=gdoc-brand__img src=https://learn.rubix.net//images/logo.png height=32></span></a><div class=custom-menu-wrapper><label for=menu-control class=gdoc-nav__control><svg class="icon menu"><use xlink:href="#menu"/></svg><svg class="icon arrow-back"><use xlink:href="#arrow_back"/></svg></label></div></div></header><main class="container flex flex-even"><aside class=gdoc-nav><nav><section class=gdoc-nav--main><ul class=gdoc-nav__list><li><span class=flex><a href=/whatsnew/ class=gdoc-nav__entry>📣 What's new</a></span></li><li><span class=flex><a href=/versions/ class=gdoc-nav__entry>Versions</a></span></li><li><span class=flex><a href=/vision/ class=gdoc-nav__entry>Vision</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/blockspace/ class=gdoc-nav__entry>Bring your own BlockSpace</a></span></li><li><span class=flex><a href=/pop/ class=gdoc-nav__entry>Proof-of-Pledge Protocol</a></span></li><li><span class=flex><a href=/pledgeandmine/ class=gdoc-nav__entry>Pledging and Mining</a></span></li></ul></li><li><span class=flex><a href=/testnet/ class=gdoc-nav__entry>Joining Rubix TestNet</a></span></li><li><span class=flex><a href=/smartcontract/ class=gdoc-nav__entry>Smart Contracts</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/smartcontractlifecycle/ class=gdoc-nav__entry>Smart Contracts Life Cycle</a></span></li><li><span class=flex><a href=/smartcontractapi/ class=gdoc-nav__entry>Smart Contracts API</a></span></li><li><span class=flex><a href=/smartcontractexample/ class="gdoc-nav__entry is-active">Smart Contract Example</a></span></li></ul></li><li><span class=flex><a href=/nft/ class=gdoc-nav__entry>NFT</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/nft-api/ class=gdoc-nav__entry>API Endpoints</a></span></li><li><span class=flex><a href=/nft-command/ class=gdoc-nav__entry>Commands</a></span></li></ul></li><li><span class=flex><a href=/ft/ class=gdoc-nav__entry>FT</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/ft-api/ class=gdoc-nav__entry>FT API Endpoints</a></span></li><li><span class=flex><a href=/ft-cli-command/ class=gdoc-nav__entry>FT CLI Commands</a></span></li></ul></li><li><span class=flex><a href=/node-setup/ class=gdoc-nav__entry>Setup Rubix Node</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/connect/ class=gdoc-nav__entry>Connect to Rubix Network</a></span></li><li><span class=flex><a href=/api/ class=gdoc-nav__entry>Endpoints</a></span></li><li><span class=flex><a href=/buy/ class=gdoc-nav__entry>Where to Buy RBT</a></span></li><li><span class=flex><a href=/node-setup/ class=gdoc-nav__entry>Setup Rubix Node</a></span></li><li><span class=flex><a href=/create-did/ class=gdoc-nav__entry>Create Decentralized IDentity</a></span></li><li><span class=flex><a href=/proof-credits/ class=gdoc-nav__entry>Earn Proof Credits</a></span></li><li><span class=flex><a href=/sdk/ class=gdoc-nav__entry>Rubix for your App</a></span></li></ul></li><li><span class=flex><a href=/keymanagement/ class=gdoc-nav__entry>Key Management</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/coldwallet/ class=gdoc-nav__entry>Cold Wallet</a></span></li><li><span class=flex><a href=/fexr/ class=gdoc-nav__entry>Fexr</a></span></li></ul></li><li><span class=flex><a href=/faq/ class=gdoc-nav__entry>Troubleshooting</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/faq/ class=gdoc-nav__entry>FAQs</a></span></li><li><span class=flex><a href=/CommonIssues/ class=gdoc-nav__entry>Common Issues</a></span></li><li><span class=flex><a href=/linux/ class=gdoc-nav__entry>Linux</a></span></li><li><span class=flex><a href=/macos/ class=gdoc-nav__entry>MacOS</a></span></li><li><span class=flex><a href=/windows/ class=gdoc-nav__entry>Windows</a></span></li><li><span class=flex><a href=/checksum/ class=gdoc-nav__entry>Verify Checksum</a></span></li></ul></li><li><span class=flex><a href=/node/ class=gdoc-nav__entry>Foundation</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/node/ class=gdoc-nav__entry>Node</a></span></li><li><span class=flex><a href=/did/ class=gdoc-nav__entry>DID</a></span></li><li><span class=flex><a href=/pop/ class=gdoc-nav__entry>Proof-of-Pledge</a></span></li><li><span class=flex><a href=/token/ class=gdoc-nav__entry>Token</a></span></li><li><span class=flex><a href=/wallet/ class=gdoc-nav__entry>Wallet</a></span></li><li><span class=flex><a href=/ipfs/ class=gdoc-nav__entry>IPFS and Peer ID</a></span></li><li><span class=flex><a href=/proofchain/ class=gdoc-nav__entry>Proofchain / Token chain</a></span></li><li><span class=flex><a href=/nft/ class=gdoc-nav__entry>NFT</a></span></li><li><span class=flex><a href=/datum/ class=gdoc-nav__entry>Enterprise Data in Rubix</a></span></li><li><span class=flex><a href=/tokenomics/ class=gdoc-nav__entry>Tokenomics in Rubix</a></span></li><li><span class=flex><a href=/hotbackups/ class=gdoc-nav__entry>Hot Backups</a></span></li></ul></li><li><span class=flex><a href=/quorum/ class=gdoc-nav__entry>Advanced</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/quorum/ class=gdoc-nav__entry>Quorum</a></span></li><li><span class=flex><a href=/subnets/ class=gdoc-nav__entry>Subnets</a></span></li><li><span class=flex><a href=/nlss/ class=gdoc-nav__entry>NLSS</a></span></li><li><span class=flex><a href=/oracle/ class=gdoc-nav__entry>Oracle</a></span></li><li><span class=flex><a href=/signature/ class=gdoc-nav__entry>Signature and Validation</a></span></li><li><span class=flex><a href=/public-share/ class=gdoc-nav__entry>Public Share</a></span></li><li><span class=flex><a href=/private-share/ class=gdoc-nav__entry>Private Share</a></span></li><li><span class=flex><a href=/mine-id/ class=gdoc-nav__entry>Mine ID</a></span></li><li><span class=flex><a href=/staking/ class=gdoc-nav__entry>Staking</a></span></li><li><span class=flex><a href=/rac/ class=gdoc-nav__entry>Rubix Asset Contract</a></span></li></ul></li></ul></section><section class=gdoc-nav--more><h2>More</h2><ul class=gdoc-nav__list><li><span class=flex><svg class="icon github"><use xlink:href="#github"/></svg><a href=https://github.com/rubixchain/learn class=gdoc-nav__entry>View source on GitHub</a></span></li><li><span class=flex><svg class="icon Rubix"><use xlink:href="#Rubix"/></svg><a href=https://twitter.com/rubixChain class=gdoc-nav__entry>Follow @rubixchain</a></span></li></ul></section></nav></aside><div class=gdoc-page><article class=gdoc-markdown><h1 class=article_title>Smart Contract Example</h1><div class=gdoc-page__anchorwrap><h2 id=voting-contract>Voting Contract<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#voting-contract class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Voting Contract" href=#voting-contract><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>This contract allows users to <strong>register a color</strong>, <strong>vote</strong> for one, and <strong>retrieve the winning color</strong>. It&rsquo;s written in <strong>Rust</strong>, compiled to <strong>WASM</strong>, and deployed on the <strong>Rubix blockchain</strong>.</p><p><strong>To set up a Rubix Node, <a href=https://learn.rubix.net/testnet/>click here</a>.</strong></p><hr><div class=gdoc-page__anchorwrap><h2 id=project-structure>Project Structure<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#project-structure class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Project Structure" href=#project-structure><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>voting_contract/                              # Rust smart contract
│── Cargo.toml                                # Rust config
│── src/
│    └── lib.rs                               # Contract code
│
├── dapp_server/                              # Go DApp server
│   ├── main.go                               # Entry point for DApp server
│   └── go.mod / go.sum                       # Go module files
│
└── artifacts/
     └── voting_contract.wasm                 
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h2 id=prerequisites>Prerequisites<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#prerequisites class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Prerequisites" href=#prerequisites><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><ul><li>Rust (with <code>wasm32-unknown-unknown</code> target)</li><li>Go (to run the DApp server)</li><li>Rubix Node</li><li>DIDs created on the node.</li></ul><hr><div class=gdoc-page__anchorwrap><h2 id=build-instructions>Build Instructions<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#build-instructions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Build Instructions" href=#build-instructions><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>cargo build --release --target wasm32-unknown-unknown
</code></pre></div><p>This generates the <code>.wasm</code> contract file in <code>target/wasm32-unknown-unknown/release</code>.
Create a folder <code>artifacts</code> and copy the wasm file into it.</p><hr><div class=gdoc-page__anchorwrap><h2 id=host-functions>Host Functions<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#host-functions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Host Functions" href=#host-functions><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Rubix smart contracts are compiled into WebAssembly (WASM) and executed within a secure runtime. However, since WASM modules are sandboxed by design, they cannot directly perform operations like accessing the network, filesystem, or persistent storage. To bridge this gap, Rubix exposes a set of host functions through its WASM runtime.</p><div class=highlight><pre class=chroma><code class=language-rust data-lang=rust><span class=k>extern</span><span class=w> </span><span class=s>&#34;C&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>fn</span> <span class=nf>read_state</span><span class=p>(</span><span class=n>key_ptr</span>: <span class=o>*</span><span class=k>const</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=n>key_len</span>: <span class=kt>usize</span><span class=p>,</span><span class=w> </span><span class=n>val_ptr</span>: <span class=o>*</span><span class=k>mut</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=n>val_len</span>: <span class=kt>usize</span><span class=p>)</span><span class=w> </span>-&gt; <span class=kt>i32</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=k>fn</span> <span class=nf>write_state</span><span class=p>(</span><span class=n>key_ptr</span>: <span class=o>*</span><span class=k>const</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=n>key_len</span>: <span class=kt>usize</span><span class=p>,</span><span class=w> </span><span class=n>val_ptr</span>: <span class=o>*</span><span class=k>const</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=n>val_len</span>: <span class=kt>usize</span><span class=p>)</span><span class=w> </span>-&gt; <span class=kt>i32</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>These are used for:</p><ul><li>Reading/writing blockchain key-value storage</li><li>Transferring tokens (if needed)</li><li>Calling external APIs</li></ul><hr><div class=gdoc-page__anchorwrap><h2 id=contract-logic-librs>Contract Logic (<code>lib.rs</code>)<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#contract-logic-librs class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Contract Logic (<code>lib.rs</code>)" href=#contract-logic-librs><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Rubix follows a stateless smart contract model, where the contract itself does not maintain or store state on-chain. Instead, all inputs and stateful data are handled off-chain through external resources such as files (JSON, CSV), databases (like SQLite or NoSQL), or even decentralized storage like IPFS. To interface with these external sources, Rubix uses host functions, which act as bridges between the contract logic and the external state.</p><hr><div class=gdoc-page__anchorwrap><h3 id=structs--helpers>Structs & Helpers<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#structs--helpers class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Structs & Helpers" href=#structs--helpers><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-rust data-lang=rust><span class=cp>#[derive(Serialize, Deserialize, Debug)]</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>ContractResponse</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>msg</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=cp>#[derive(Serialize, Deserialize, Debug)]</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>ContractError</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>msg</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=cp>#[derive(Serialize, Deserialize, Clone, Debug)]</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>Vote</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>voter_id</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>color</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=cp>#[derive(Serialize, Deserialize, Debug)]</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>CastAndTally</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>voter_id</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>color</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>static</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>VOTES</span>: <span class=nb>Option</span><span class=o>&lt;</span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>Vote</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>None</span><span class=p>;</span><span class=w>
</span></code></pre></div><ul><li><code>ContractResponse</code> and <code>ContractError</code> are used to serialize success or error messages.</li><li><code>Vote</code> stores a single voter’s choice.</li><li><code>CastAndTally</code> is the struct used for deserializing inputs to the <code>cast_and_tally</code> function.</li><li><code>VOTES</code> stores the in-memory list of all vote entries globally.</li></ul><hr><div class=gdoc-page__anchorwrap><h3 id=vote-storage-helper>Vote Storage Helper<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#vote-storage-helper class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Vote Storage Helper" href=#vote-storage-helper><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-rust data-lang=rust><span class=k>fn</span> <span class=nf>get_votes</span><span class=p>()</span><span class=w> </span>-&gt; <span class=kp>&amp;</span><span class=nb>&#39;static</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>Vote</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>unsafe</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=n>VOTES</span><span class=p>.</span><span class=n>is_none</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>VOTES</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=nb>Vec</span>::<span class=n>new</span><span class=p>());</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>        </span><span class=n>VOTES</span><span class=p>.</span><span class=n>as_mut</span><span class=p>().</span><span class=n>unwrap</span><span class=p>()</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><ul><li>Lazily initializes the in-memory vote store when first accessed.</li><li>Ensures votes are accumulated across multiple calls during runtime.</li></ul><hr><div class=gdoc-page__anchorwrap><h3 id=core-functions>Core Functions<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#core-functions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Core Functions" href=#core-functions><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=gdoc-page__anchorwrap><h3 id=cast_and_tally><code>cast_and_tally</code><a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#cast_and_tally class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor <code>cast_and_tally</code>" href=#cast_and_tally><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-rust data-lang=rust><span class=cp>#[contract_fn]</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>cast_and_tally</span><span class=p>(</span><span class=n>input</span>: <span class=nc>CastAndTally</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nb>Result</span><span class=o>&lt;</span><span class=nb>String</span><span class=p>,</span><span class=w> </span><span class=n>ContractError</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>!</span><span class=n>ALLOWED_COLORS</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=o>&amp;</span><span class=n>input</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>as_str</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nb>Err</span><span class=p>(</span><span class=n>ContractError</span>::<span class=n>new</span><span class=p>(</span><span class=s>&#34;Invalid color&#34;</span><span class=p>));</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>votes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>get_votes</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>votes</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>Vote</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>voter_id</span>: <span class=nc>input</span><span class=p>.</span><span class=n>voter_id</span><span class=p>.</span><span class=n>clone</span><span class=p>(),</span><span class=w>
</span><span class=w>        </span><span class=n>color</span>: <span class=nc>input</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>clone</span><span class=p>(),</span><span class=w>
</span><span class=w>    </span><span class=p>});</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>color_counts</span>: <span class=nc>HashMap</span><span class=o>&lt;</span><span class=nb>String</span><span class=p>,</span><span class=w> </span><span class=kt>usize</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HashMap</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=n>vote</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>votes</span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=o>*</span><span class=n>color_counts</span><span class=p>.</span><span class=n>entry</span><span class=p>(</span><span class=n>vote</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>clone</span><span class=p>()).</span><span class=n>or_insert</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>winner</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>color_counts</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>max_by_key</span><span class=p>(</span><span class=o>|</span><span class=n>entry</span><span class=o>|</span><span class=w> </span><span class=n>entry</span><span class=p>.</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>map</span><span class=p>(</span><span class=o>|</span><span class=p>(</span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=n>_</span><span class=p>)</span><span class=o>|</span><span class=w> </span><span class=n>color</span><span class=p>.</span><span class=n>clone</span><span class=p>())</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>unwrap_or_else</span><span class=p>(</span><span class=o>||</span><span class=w> </span><span class=s>&#34;No votes yet&#34;</span><span class=p>.</span><span class=n>to_string</span><span class=p>());</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>msg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>format</span><span class=o>!</span><span class=p>(</span><span class=w>
</span><span class=w>        </span><span class=s>&#34;Vote cast for &#39;{}&#39;. Tally: {:?}. Winner: {}&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=n>input</span><span class=p>.</span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=n>color_counts</span><span class=p>,</span><span class=w> </span><span class=n>winner</span><span class=w>
</span><span class=w>    </span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ContractResponse</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>msg</span><span class=w> </span><span class=p>};</span><span class=w>
</span><span class=w>    </span><span class=n>serde_json</span>::<span class=n>to_string</span><span class=p>(</span><span class=o>&amp;</span><span class=n>response</span><span class=p>)</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>map_err</span><span class=p>(</span><span class=o>|</span><span class=n>e</span><span class=o>|</span><span class=w> </span><span class=n>ContractError</span>::<span class=n>new</span><span class=p>(</span><span class=o>&amp;</span><span class=n>format</span><span class=o>!</span><span class=p>(</span><span class=s>&#34;Serialization error: {}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>)))</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><ul><li>Validates if the provided color is allowed (<code>Red</code>, <code>Green</code>, <code>Blue</code>).</li><li>Adds the vote to the internal memory store.</li><li>Tallies votes across all colors using a HashMap.</li><li>Calculates the color with the maximum number of votes and includes it in the output.</li><li>Returns the result as a serialized JSON message.</li></ul><hr><div class=gdoc-page__anchorwrap><h2 id=state-management>State Management<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#state-management class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor State Management" href=#state-management><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><ul><li>Votes are stored in memory via a lazily initialized global static variable (<code>VOTES</code>).</li><li>State is retained across multiple function calls during a runtime session.</li><li>The function currently does not prevent duplicate votes or persist them permanently to chain state.</li></ul><hr><div class=gdoc-page__anchorwrap><h2 id=dapp-server>DApp Server<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#dapp-server class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor DApp Server" href=#dapp-server><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>This <strong>Go-based DApp server</strong> acts as the execution environment for the compiled WASM voting contract deployed on the <strong>Rubix blockchain</strong>. It exposes a REST API to receive smart contract calls via callback, invokes the appropriate contract method, and returns the result.</p><hr><div class=gdoc-page__anchorwrap><h2 id=purpose>Purpose<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#purpose class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Purpose" href=#purpose><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>The DApp server:</p><ul><li>Loads environment variables (Rubix Node URL, WASM file path).</li><li>Accepts contract execution inputs over HTTP.</li><li>Loads and runs the WASM smart contract.</li><li>Parses the input and returns structured results.</li></ul><hr><div class=gdoc-page__anchorwrap><h2 id=environment-setup>Environment Setup<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#environment-setup class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Environment Setup" href=#environment-setup><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Create a <code>.env</code> file based on <code>.env.sample</code>:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>RUBIX_NODE_ADDRESS=http://localhost:20009
VOTING_CONTRACT_PATH=/Users/arnab/TRIE-internal/contracts/voting_contract/artifacts/voting_contract.wasm
</code></pre></div><p>Install dependencies:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>go mod tidy
</code></pre></div><p>Run the server:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>go run main.go
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h2 id=core-logic-maingo>Core Logic: <code>main.go</code><a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#core-logic-maingo class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Core Logic: <code>main.go</code>" href=#core-logic-maingo><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=1-import-packages>1. Import Packages<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#1-import-packages class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. Import Packages" href=#1-import-packages><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;encoding/json&#34;</span>
	<span class=s>&#34;fmt&#34;</span>
	<span class=s>&#34;net/http&#34;</span>
	<span class=s>&#34;os&#34;</span>
	<span class=s>&#34;path&#34;</span>
	<span class=s>&#34;sync&#34;</span>

	<span class=s>&#34;github.com/gin-gonic/gin&#34;</span>
	<span class=s>&#34;github.com/joho/godotenv&#34;</span>
	<span class=nx>wasmbridge</span> <span class=s>&#34;github.com/rubixchain/rubix-wasm/go-wasm-bridge&#34;</span>
<span class=p>)</span>
</code></pre></div><ul><li><code>godotenv</code>: loads <code>.env</code> file.</li><li><code>wasmbridge</code>: interfaces with Rubix WASM runtime.</li><li><code>sync</code>: protects in-memory vote storage.</li></ul><div class=gdoc-page__anchorwrap><h3 id=2-global-variables>2. Global Variables<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#2-global-variables class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Global Variables" href=#2-global-variables><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kd>var</span> <span class=p>(</span>
	<span class=nx>voteStore</span> <span class=p>=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span><span class=p>)</span>
	<span class=nx>storeLock</span> <span class=p>=</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>Mutex</span><span class=p>{}</span>
<span class=p>)</span>
</code></pre></div><ul><li>A thread-safe in-memory map to track votes.</li></ul><div class=gdoc-page__anchorwrap><h3 id=3-main-function>3. Main Function<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#3-main-function class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Main Function" href=#3-main-function><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>_</span> <span class=p>=</span> <span class=nx>godotenv</span><span class=p>.</span><span class=nf>Load</span><span class=p>()</span> <span class=c1>// Load .env
</span><span class=c1></span>	<span class=nx>r</span> <span class=o>:=</span> <span class=nx>gin</span><span class=p>.</span><span class=nf>Default</span><span class=p>()</span>
	<span class=nx>r</span><span class=p>.</span><span class=nf>POST</span><span class=p>(</span><span class=s>&#34;/api/voting-contract&#34;</span><span class=p>,</span> <span class=nx>handleVotingContract</span><span class=p>)</span>
	<span class=nx>r</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;:8080&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><ul><li>Exposes one POST endpoint.</li></ul><div class=gdoc-page__anchorwrap><h3 id=4-voting-contract-handler>4. Voting Contract Handler<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#4-voting-contract-handler class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. Voting Contract Handler" href=#4-voting-contract-handler><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>handleVotingContract</span><span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>nodeAddress</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;RUBIX_NODE_ADDRESS&#34;</span><span class=p>)</span>
	<span class=nx>contractPath</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;VOTING_CONTRACT_PATH&#34;</span><span class=p>)</span>

	<span class=kd>var</span> <span class=nx>contractInput</span> <span class=kd>struct</span> <span class=p>{</span>
		<span class=nx>Method</span>  <span class=kt>string</span>                 <span class=s>`json:&#34;method&#34;`</span>
		<span class=nx>Payload</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>interface</span><span class=p>{}</span> <span class=s>`json:&#34;payload&#34;`</span>
	<span class=p>}</span>
	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nf>ShouldBindJSON</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>contractInput</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nf>wrapError</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>,</span> <span class=s>&#34;Invalid request body&#34;</span><span class=p>)</span>
		<span class=k>return</span>
	<span class=p>}</span>

	<span class=k>switch</span> <span class=nx>contractInput</span><span class=p>.</span><span class=nx>Method</span> <span class=p>{</span>
	<span class=k>case</span> <span class=s>&#34;cast_and_tally&#34;</span><span class=p>:</span>
		<span class=c1>// Handle directly
</span><span class=c1></span>		<span class=nf>castAndTally</span><span class=p>(</span><span class=nx>contractInput</span><span class=p>.</span><span class=nx>Payload</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
	<span class=k>default</span><span class=p>:</span>
		<span class=c1>// Fallback to WASM invocation
</span><span class=c1></span>		<span class=nf>invokeWasmMethod</span><span class=p>(</span><span class=nx>nodeAddress</span><span class=p>,</span> <span class=nx>contractPath</span><span class=p>,</span> <span class=nx>contractInput</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></div><div class=gdoc-page__anchorwrap><h3 id=5-cast_and_tally-logic-in-go>5. <code>cast_and_tally</code> Logic in Go<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#5-cast_and_tally-logic-in-go class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 5. <code>cast_and_tally</code> Logic in Go" href=#5-cast_and_tally-logic-in-go><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>castAndTally</span><span class=p>(</span><span class=nx>payload</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>interface</span><span class=p>{},</span> <span class=nx>c</span> <span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>voterID</span> <span class=o>:=</span> <span class=nx>payload</span><span class=p>[</span><span class=s>&#34;voter_id&#34;</span><span class=p>].(</span><span class=kt>string</span><span class=p>)</span>
	<span class=nx>color</span> <span class=o>:=</span> <span class=nx>payload</span><span class=p>[</span><span class=s>&#34;color&#34;</span><span class=p>].(</span><span class=kt>string</span><span class=p>)</span>

	<span class=nx>storeLock</span><span class=p>.</span><span class=nf>Lock</span><span class=p>()</span>
	<span class=nx>voteStore</span><span class=p>[</span><span class=nx>voterID</span><span class=p>]</span> <span class=p>=</span> <span class=nx>color</span>
	<span class=nx>tally</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>)</span>
	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>c</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>voteStore</span> <span class=p>{</span>
		<span class=nx>tally</span><span class=p>[</span><span class=nx>c</span><span class=p>]</span><span class=o>++</span>
	<span class=p>}</span>

	<span class=nx>winner</span> <span class=o>:=</span> <span class=s>&#34;&#34;</span>
	<span class=nx>maxVotes</span> <span class=o>:=</span> <span class=o>-</span><span class=mi>1</span>
	<span class=k>for</span> <span class=nx>color</span><span class=p>,</span> <span class=nx>count</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>tally</span> <span class=p>{</span>
		<span class=k>if</span> <span class=nx>count</span> <span class=p>&gt;</span> <span class=nx>maxVotes</span> <span class=p>{</span>
			<span class=nx>maxVotes</span> <span class=p>=</span> <span class=nx>count</span>
			<span class=nx>winner</span> <span class=p>=</span> <span class=nx>color</span>
		<span class=p>}</span>
	<span class=p>}</span>
	<span class=nx>storeLock</span><span class=p>.</span><span class=nf>Unlock</span><span class=p>()</span>

	<span class=nf>wrapSuccess</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;Vote recorded. Tally: %v. Current winner: %s&#34;</span><span class=p>,</span> <span class=nx>tally</span><span class=p>,</span> <span class=nx>winner</span><span class=p>))</span>
<span class=p>}</span>
</code></pre></div><ul><li>Votes are saved per voter ID.</li><li>Computes real-time tally and winner.</li></ul><div class=gdoc-page__anchorwrap><h3 id=6-wasm-invocation-default-case>6. WASM Invocation (Default Case)<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#6-wasm-invocation-default-case class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 6. WASM Invocation (Default Case)" href=#6-wasm-invocation-default-case><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>invokeWasmMethod</span><span class=p>(</span><span class=nx>nodeAddr</span><span class=p>,</span> <span class=nx>contractPath</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>input</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Method</span>  <span class=kt>string</span>
	<span class=nx>Payload</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>interface</span><span class=p>{}</span>
<span class=p>},</span> <span class=nx>c</span> <span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>hostFnRegistry</span> <span class=o>:=</span> <span class=nx>wasmbridge</span><span class=p>.</span><span class=nf>NewHostFunctionRegistry</span><span class=p>()</span>
	<span class=nx>wasmModule</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>wasmbridge</span><span class=p>.</span><span class=nf>NewWasmModule</span><span class=p>(</span>
		<span class=nx>path</span><span class=p>.</span><span class=nf>Clean</span><span class=p>(</span><span class=nx>contractPath</span><span class=p>),</span>
		<span class=nx>hostFnRegistry</span><span class=p>,</span>
		<span class=nx>wasmbridge</span><span class=p>.</span><span class=nf>WithRubixNodeAddress</span><span class=p>(</span><span class=nx>nodeAddr</span><span class=p>),</span>
	<span class=p>)</span>
	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nf>wrapError</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;failed to load wasm module: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>))</span>
		<span class=k>return</span>
	<span class=p>}</span>

	<span class=nx>inputBytes</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>interface</span><span class=p>{}{</span><span class=nx>input</span><span class=p>.</span><span class=nx>Method</span><span class=p>:</span> <span class=nx>input</span><span class=p>.</span><span class=nx>Payload</span><span class=p>})</span>
	<span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>wasmModule</span><span class=p>.</span><span class=nf>CallFunction</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>inputBytes</span><span class=p>))</span>
	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nf>wrapError</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;contract function call failed: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>))</span>
		<span class=k>return</span>
	<span class=p>}</span>

	<span class=nx>msg</span><span class=p>,</span> <span class=nx>errMsg</span> <span class=o>:=</span> <span class=nf>extractContractOutput</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span>
	<span class=k>if</span> <span class=nx>errMsg</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
		<span class=nf>wrapError</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>,</span> <span class=nx>errMsg</span><span class=p>)</span>
		<span class=k>return</span>
	<span class=p>}</span>
	<span class=nf>wrapSuccess</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>,</span> <span class=nx>msg</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h2 id=example-input--output>Example Input & Output<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#example-input--output class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Example Input & Output" href=#example-input--output><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=input>Input<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#input class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Input" href=#input><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>To test the voting contract using the DApp server, open your terminal, navigate to the <code>dapp_server</code> folder (which contains the main.go file), and make sure the server is running by running <code>go run main.go</code> . Once the server is up and listening on port 8080, use the following curl command in a separate terminal window to send a request:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:8080/api/voting-contract <span class=se>\
</span><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span><span class=se></span>  -d <span class=s1>&#39;{
</span><span class=s1>    &#34;method&#34;: &#34;cast_and_tally&#34;,
</span><span class=s1>    &#34;payload&#34;: {
</span><span class=s1>      &#34;voter_id&#34;: &#34;voter1&#34;,
</span><span class=s1>      &#34;color&#34;: &#34;Red&#34;
</span><span class=s1>    }
</span><span class=s1>  }&#39;</span>
</code></pre></div><div class=gdoc-page__anchorwrap><h3 id=output>Output<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#output class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Output" href=#output><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
  <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;success&#34;</span><span class=p>,</span>
  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Vote cast for &#39;Red&#39;. Tally: {\&#34;Red\&#34;: 1}. Winner: Red&#34;</span>
<span class=p>}</span>
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h2 id=deployment-flow>Deployment Flow<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#deployment-flow class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Deployment Flow" href=#deployment-flow><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><ol><li>Write logic in <code>lib.rs</code>.</li><li>Compile using <code>cargo build</code>.</li><li>Upload <code>.wasm</code> file to Rubix node.</li><li>Trigger function using Rubix CLI or DApp server.</li></ol><hr><div class=gdoc-page__anchorwrap><h2 id=security-checks>Security Checks<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#security-checks class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Security Checks" href=#security-checks><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><ul><li>Prevents double voting by checking <code>vote_&lt;user_did></code> state.</li><li>Validates registered colors before allowing vote.</li><li>Stores all state on-chain using Rubix&rsquo;s persistent storage.</li></ul><hr><div class=gdoc-page__anchorwrap><h2 id=smart-contract-setup-steps>Smart Contract Setup Steps<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#smart-contract-setup-steps class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Smart Contract Setup Steps" href=#smart-contract-setup-steps><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=1-clone-the-voting-smart-contract>1. Clone the Voting Smart Contract<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#1-clone-the-voting-smart-contract class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. Clone the Voting Smart Contract" href=#1-clone-the-voting-smart-contract><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>git clone https://github.com/rubixchain/rubix-dapps
<span class=nb>cd</span> contracts
<span class=nb>cd</span> voting-contract
</code></pre></div><div class=gdoc-page__anchorwrap><h3 id=2-generate-wasm--run-server>2. Generate WASM & Run Server<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#2-generate-wasm--run-server class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Generate WASM & Run Server" href=#2-generate-wasm--run-server><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> voting-contract
cargo build --target wasm32-unknown-unknown
</code></pre></div><p>The WASM file will be generated at:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>target/wasm32-unknown-unknown/debug/voting_contract.wasm
</code></pre></div><p>Create a folder <code>artifacts</code> and copy the wasm file into it.</p><p>To run the DApp server:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>go run main.go
</code></pre></div><blockquote><p>The server listens at: <code>http://localhost:8080/api/contract-input</code></p></blockquote><hr><div class=gdoc-page__anchorwrap><h3 id=3-generate-the-smart-contract>3. Generate the Smart Contract<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#3-generate-the-smart-contract class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Generate the Smart Contract" href=#3-generate-the-smart-contract><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Open Swagger at: <code>http://localhost:20000/swagger/index.html</code></p><ul><li>Use <code>/api/genarate-smart-contract</code></li></ul><p>Get the contract token hash from the logs (example: <code>QmXyz...</code>)</p><hr><div class=gdoc-page__anchorwrap><h3 id=4-subscribe-to-smart-contract>4. Subscribe to Smart Contract<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#4-subscribe-to-smart-contract class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. Subscribe to Smart Contract" href=#4-subscribe-to-smart-contract><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>In Rubix’s stateless, event-driven architecture, not all nodes are aware of every smart contract by default. To participate in or track the execution of a specific contract, a node must explicitly subscribe to it. This subscription uses a publish-subscribe (pub-sub) mechanism that ensures only interested nodes receive updates or execution events related to the contract. By subscribing, a node signals that it wants to stay in sync with the contract’s state transitions and be notified when actions like execution or deployment occur. Without subscribing, a node would remain unaware of these updates, as Rubix does not broadcast all contract activity globally like traditional blockchains.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/subscribe-smart-contract <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{&#34;smartContractToken&#34;: &#34;&lt;Smart Contract Token Hash&gt;&#34;}&#39;</span>
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h3 id=5-register-callback-url>5. Register Callback URL<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#5-register-callback-url class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 5. Register Callback URL" href=#5-register-callback-url><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Since Rubix is designed to be stateless, it ensures that the blockchain itself does not bear the computational or storage load of executing smart contract logic.</p><p>To facilitate this, when a smart contract is executed via the Rubix node, the node sends a POST request to a Callback URL registered by the developer or user. This URL typically points to a backend server (e.g., <code>http://localhost:8080/api/contract-input</code>) which:</p><ul><li><p>Receives the smart contract execution request.</p></li><li><p>Loads the corresponding WASM file.</p></li><li><p>Calls the appropriate function inside the WASM using a compatible runtime.</p></li><li><p>Reads/writes to external state (like JSON, databases, or other storage).</p></li><li><p>Updates the smart contract state (stored in a state file).</p></li><li><p>Returns the result to the node for on-chain record keeping.</p></li></ul><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/register-callback-url <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;CallBackURL&#34;: &#34;http://localhost:8080/api/contract-input&#34;,
</span><span class=s1>  &#34;SmartContractToken&#34;: &#34;&lt;Smart Contract Token Hash&gt;&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h3 id=6-deploy-the-smart-contract>6. Deploy the Smart Contract<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#6-deploy-the-smart-contract class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 6. Deploy the Smart Contract" href=#6-deploy-the-smart-contract><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/deploy-smart-contract <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;comment&#34;: &#34;deploying..&#34;,
</span><span class=s1>  &#34;deployerAddr&#34;: &#34;&lt;Deployer DID&gt;&#34;,
</span><span class=s1>  &#34;quorumType&#34;: 2,
</span><span class=s1>  &#34;rbtAmount&#34;: 1,
</span><span class=s1>  &#34;smartContractToken&#34;: &#34;&lt;Smart Contract Token Hash&gt;&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><p>Then, confirm using:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/signature-response <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;id&#34;: &#34;&lt;UUID from deploy response&gt;&#34;,
</span><span class=s1>  &#34;mode&#34;: 0,
</span><span class=s1>  &#34;password&#34;: &#34;mypassword&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h3 id=7-execute-the-smart-contract>7. Execute the Smart Contract<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#7-execute-the-smart-contract class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 7. Execute the Smart Contract" href=#7-execute-the-smart-contract><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/execute-smart-contract <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;comment&#34;: &#34;executing..&#34;,
</span><span class=s1>  &#34;executorAddr&#34;: &#34;&lt;Executor DID&gt;&#34;,
</span><span class=s1>  &#34;quorumType&#34;: 2,
</span><span class=s1>  &#34;smartContractData&#34;: &#34;Red&#34;,
</span><span class=s1>  &#34;smartContractToken&#34;: &#34;&lt;Smart Contract Token Hash&gt;&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><p>Then, confirm using:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/signature-response <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;id&#34;: &#34;&lt;UUID from execute response&gt;&#34;,
</span><span class=s1>  &#34;mode&#34;: 0,
</span><span class=s1>  &#34;password&#34;: &#34;mypassword&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><hr><div class=gdoc-page__anchorwrap><h3 id=8-display-smart-contract-chain-data>8. Display Smart Contract Chain Data<a data-clipboard-text=https://learn.rubix.net/smartcontractexample/#8-display-smart-contract-chain-data class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 8. Display Smart Contract Chain Data" href=#8-display-smart-contract-chain-data><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p><strong>Full Chain:</strong></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/get-smart-contract-token-chain-data <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;latest&#34;: false,
</span><span class=s1>  &#34;token&#34;: &#34;&lt;Smart Contract Token Hash&gt;&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><p><strong>Latest Block:</strong></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST http://localhost:20000/api/get-smart-contract-token-chain-data <span class=se>\
</span><span class=se></span>-H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>-d <span class=s1>&#39;{
</span><span class=s1>  &#34;latest&#34;: true,
</span><span class=s1>  &#34;token&#34;: &#34;&lt;Smart Contract Token Hash&gt;&#34;
</span><span class=s1>}&#39;</span>
</code></pre></div><hr></article><div class="gdoc-page__footer flex flex-wrap justify-between"><span class=gdoc-page__nav><a class="gdoc-page__nav--prev flex align-center" href=/smartcontractapi/ title="Smart Contracts API">Smart Contracts API</a></span>
<span class=gdoc-page__nav><a class="gdoc-page__nav--next flex align-center" href=/nft/ title=NFT>NFT</a></span></div></div></main><footer class=gdoc-footer><div class="container flex flex-wrap"><span class=gdoc-footer__item>&copy; 2025 Rubix.</span>
<span class=gdoc-footer__item><a href=https://rubix.net/ class=gdoc-footer__link>News</a></span>
<span class=gdoc-footer__item><a href=https://medium.com/rubixchain class=gdoc-footer__link>Blog</a></span>
<span class=gdoc-footer__item><a href=https://t.me/rubixblockchain class=gdoc-footer__link>Telegram</a></span></div></footer></div><script defer src=/js/clipboard.min.js></script><script>document.addEventListener("DOMContentLoaded",function(event){var clipboard=new ClipboardJS('.clip');});</script></body></html>